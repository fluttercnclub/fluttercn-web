<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <!-- meta -->
  <meta charset="utf-8"/>
  <meta name='description' content='<%= config.description %>'>
  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width"/>
  <meta name="keywords" content="<%= config.keywords %>"/>
  <!-- see http://smerity.com/articles/2013/where_did_all_the_http_referrers_go.html -->
  <meta name="referrer" content="always">

  <%
  var headers = config.site_headers || [];
  for (var i = 0, l = headers.length; i < l; i++) {
  %>
  <%- headers[i] %>
  <% } %>

  <link title="RSS" type="application/rss+xml" rel="alternate" href="/rss"/>

  <% if (config.site_icon) { %>
  <link rel="icon" href="<%- staticFile(config.site_icon) %>" type="image/x-icon"/>
  <% } %>
  <link rel="apple-touch-icon" href="/public/images/touch-icon.png" />

  <!-- style -->
  <%- Loader('/public/stylesheets/index.min.css')
  .css('/public/libs/bootstrap/css/bootstrap.css')
  .css('/public/stylesheets/common.css')
  .css('/public/stylesheets/style.less')
  .css('/public/stylesheets/responsive.css')
  .css('/public/stylesheets/jquery.atwho.css')
  .css('/public/libs/editor/editor.css')
  .css('/public/libs/webuploader/webuploader.css')
  .css('/public/libs/code-prettify/prettify.css')
  .css('/public/libs/font-awesome/css/font-awesome.css')
  .done(assets, config.site_static_host, config.mini_assets)
  %>

  <!-- scripts -->
  <%- Loader('/public/index.min.js')
  .js('/public/libs/jquery-2.1.0.js')
  .js('/public/libs/lodash.compat.js')
  .js('/public/libs/jquery-ujs.js')
  .js('/public/libs/bootstrap/js/bootstrap.js')
  .js('/public/libs/jquery.caret.js')
  .js('/public/libs/jquery.atwho.js')
  .js('/public/libs/markdownit.js')
  .js('/public/libs/code-prettify/prettify.js')
  .js('/public/libs/qrcode.js')
  .js('/public/javascripts/main.js')
  .js('/public/javascripts/responsive.js')
  .done(assets, config.site_static_host, config.mini_assets)
  %>

  <% if (typeof(topic) !== 'undefined') { %>
  <title><%= topic.title %> - <%= config.name %></title>
  <% } else if (typeof(pageTitle) !== 'undefined') { %>
  <title><%= pageTitle %> - <%= config.name %></title>
  <% } else { %>
  <title><%= config.name %></title>
  <% } %>
  <meta content="_csrf" name="csrf-param">
  <meta content="<%= csrf %>" name="csrf-token">
</head>
<body>
<!-- navbar -->
<div class='navbar'>
  <div class='navbar-inner'>
    <div class='container'>
      <a class='brand' href='/'>
        <% if (config.site_logo) {%>
          <img src="<%- staticFile(config.site_logo) %>" />
        <%} else {%>
          <%- config.name %>
        <%}%>
      </a>

      <form id='search_form' class='navbar-search' action="/search">
        <input type='text' id='q' name='q' class='search-query span3' value='' placeholder="è¾“å…¥å†…å®¹æœç´¢"/>
      </form>
      <ul class='nav pull-right'>
        <li><a href='/'>é¦–é¡µ</a></li>
        <% if (current_user){ %>
        <li>
            <a href='/my/messages'>
              <% if (current_user.messages_count) { %>
                <span class='big messages_count'><%= current_user.messages_count %></span>
              <% } %>
              æœªè¯»æ¶ˆæ¯
            </a>
        </li>
        <% } %>
        <li><a href='/getstart'>ä¸­æ–‡èµ„æº</a></li>
        <%
        var site_navs = config.site_navs || [];
        for (var i = 0, l = site_navs.length; i < l; i++) {
        var nav = site_navs[i];
        %>
        <li><a href="<%- nav[0] %>" target="<%- nav[2] %>"><%- nav[1] %></a></li>
        <% } %>
        <% if (current_user) { %>
        <li><a href='/setting'>è®¾ç½®</a></li>
        <li>
          <a href='/signout' data-method="post" rel="nofollow">é€€å‡º</a>
        </li>
        <% } else { %>
        <li><a href='/signup'>æ³¨å†Œ</a></li>
        <li><a href='/signin'>ç™»å½•</a></li>
        <% } %>
      </ul>
      <a class="btn btn-navbar" id="responsive-sidebar-trigger">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
    </div>
  </div>
</div>

<!-- æ³¨å†Œç™»å½•æŒ‡å¼• -->
<% if (!current_user) { %>
  <section class="regist-guide">
    <div class="container">
      <h3>ğŸ”¥Flutterä¸­æ–‡æŠ€æœ¯ç¤¾åŒºä¸Šçº¿ğŸ”¥</h3>
      <h5>å¿«æ¥åŠ å…¥ FlutterCN</h5>
      <h5>å’Œå¥½å‹ä»¬ä¸€èµ·åˆ†äº«çŸ¥è¯†äº¤æµç»éªŒå§</h5>
      <div class="btns">
        <a href="/auth/github">
          <span class="span-primary">
            GitHubç™»å½•
          </span>
        </a>
      </div>
    </div>
  </section>
<% } %>

<div id='main'>
  <%- body %>
</div>
<div id='backtotop'>å›åˆ°é¡¶éƒ¨</div>
<div id='footer'>
  <div id='footer_main'>
    <!-- <div class="links">
      <a class='dark' href='/rss'>RSS</a>
      |
      <a class='dark' href='https://github.com/cnodejs/nodeclub/'>nodeclub</a>é©±åŠ¨
    </div> -->

    <%- partial('./_sponsors') %>

  </div>
</div>
<div id="sidebar-mask"></div>

<% if (config.google_tracker_id) { %>
<script>
  // google analytics
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script', "<%- proxy('https://www.google-analytics.com/analytics.js') %>",'ga');

  ga('create', '<%-config.google_tracker_id%>', 'auto');
  ga('send', 'pageview');
</script>
<% } %>

<% if (config.cnzz_tracker_id) { %>
<div style="display:none;">
  <script src="//s95.cnzz.com/z_stat.php?id=<%- config.cnzz_tracker_id %>&web_id=<%- config.cnzz_tracker_id %>" language="JavaScript"></script>
</div>
<% } %>

<!-- ç™¾åº¦é“¾æ¥æ¨é€ -->
<script>
  (function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
</body>
</html>
